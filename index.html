<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <title>Clone SellPhoneS</title>
  </head>
  <body>
    <main>
      <section class="section_sale common_width">
        <div class="section_sale_wrapper">
          <div class="section_sale_title">
            <img src="./images/hot-sale_2.gif" alt="Hot sale" />

            <div id="saleCountDown" class="section_sale_title_count_down"></div>
          </div>
          <div class="section_sale_content">
            <div class="swiper-container">
              <ul id="swiperWrapper" class="swiper-wrapper">
                <li class="swiper-slide card">
                  <div class="card_badge">
                    <div class="card_badge_left"><div>Giảm 26%</div></div>
                    <div class="card_badge_right">Trả góp</div>
                  </div>
                  <a class="card_top" href="#">
                    <img src="./images/ss-s24-ultra.webp" alt="product" />
                    <h3>Samsung Galaxy S24 Ultra 12GB 256GB</h3>
                  </a>

                  <div>
                    <a class="card_mid" href="#">
                      <div>
                        <h4 class="card_price">24.000.000<span>đ</span></h4>
                        <h4 class="card_old_price">33.000.000<span>đ</span></h4>
                      </div>
                      <!-- <div class="card_des"></div> -->
                    </a>
                  </div>
                </li>
              </ul>

              <!-- If we need navigation buttons -->
              <div class="swiper-button-prev"></div>
              <div class="swiper-button-next"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </body>

  <script>
    const products = [
      {
        model: 'Galaxy S21 Ultra Test Test Test',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Phantom Black',
        storage: '256GB',
        oldPrice: 27888000,
        price: 23240000,
        payOff: 0,
      },
      {
        model: 'Galaxy Z Flip 3',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Cream',
        storage: '128GB',
        oldPrice: 23240000,
        price: 20910000,
        payOff: 0,
      },
      {
        model: 'Galaxy Note 20',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Mystic Bronze',
        storage: '256GB',
        oldPrice: 23240000,
        price: 18592000,
        payOff: 0,
      },
      {
        model: 'Galaxy A52',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Awesome Blue',
        storage: '128GB',
        oldPrice: 11620000,
        price: 10458000,
        payOff: 0,
      },
      {
        model: 'Galaxy Tab S7',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Mystic Black',
        storage: '128GB',
        oldPrice: 16252000,
        price: 13910000,
        payOff: 0,
      },
      {
        model: 'Galaxy Watch 4',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Phantom Black',
        size: '45mm',
        oldPrice: 10458000,
        price: 8957000,
        payOff: 0,
      },
      {
        model: 'Galaxy Buds Pro',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Phantom Violet',
        connectivity: 'Bluetooth',
        oldPrice: 4648000,
        price: 3958000,
        payOff: 0,
      },
      {
        model: 'Galaxy Book Pro',
        url: '#',
        image: 'ss-s24-ultra.webp',
        color: 'Mystic Blue',
        storage: '512GB SSD',
        oldPrice: 32486000,
        price: 30264000,
        payOff: 0,
      },
      {
        model: 'Samsung Odyssey G9',
        url: '#',
        image: 'ss-s24-ultra.webp',
        type: 'Gaming Monitor',
        curve: '1000R',
        oldPrice: 58120000,
        price: 46496000,
        payOff: 0,
      },
      {
        model: 'Samsung Frame TV',
        url: '#',
        image: 'ss-s24-ultra.webp',
        size: '55 inch',
        resolution: '4K',
        oldPrice: 46496000,
        price: 41846400,
        payOff: 0,
      },
    ];

    $(document).ready(function () {
      // Create countdown
      var endTime = new Date('04/30/2024 10:1 AM');
      createCountDown(endTime);

      // Create products HTML
      createProducts();
    });


    // ================== Create countdown ==================
    function createCountDown(endTime) {
     countDownTimer(endTime, 'saleCountDown');
    }

    function countDownTimer(dt, id) {
      var end = new Date(dt);
      var _second = 1000;
      var _minute = _second * 60;
      var _hour = _minute * 60;
      var _day = _hour * 24;
      var timer;
      function showRemaining() {
        var now = new Date();
        var distance = end - now;
        if (distance < 0) {
          clearInterval(timer);
          document.getElementById(id).innerHTML = 'EXPIRED!';

          return;
        }
        var days = Math.floor(distance / _day);
        var hours = Math.floor((distance % _day) / _hour);
        var minutes = Math.floor((distance % _hour) / _minute);
        var seconds = Math.floor((distance % _minute) / _second);

        if (String(hours).length < 2) {
          hours = 0 + String(hours);
        }
        if (String(minutes).length < 2) {
          minutes = 0 + String(minutes);
        }
        if (String(seconds).length < 2) {
          seconds = 0 + String(seconds);
        }
        var dateStr = '<div class="countdown_wrapper">Kết thúc sau: ' + `<div class="rounded">${days}</div>` + ' : ' + `<div class="rounded">${hours}</div>` + ' : ' + `<div class="rounded">${minutes}</div>` + ' : ' + `<div class="rounded">${seconds}</div>` + '</div>';
        document.getElementById(id).innerHTML = dateStr;
      }

      timer = setInterval(showRemaining, 1000);
    }

    // ================== Create products ==================
    function createProducts() {
      var swiperItemsHtml = '';
      products.forEach((product) => {
        const productHTML = createProductHTML(product);
        swiperItemsHtml += productHTML;
      });
      $('#swiperWrapper').html(swiperItemsHtml);
    }

    function createProductHTML(product) {
      return `
        <li class="swiper-slide card">
          <div class="card_wrapper">
            <div class="card_badge">
              <div class="card_badge_left"><div>Giảm ${Math.round(100 - (product.price * 100) / product.oldPrice)}%</div></div>
              <div class="card_badge_right">Trả góp ${product.payOff}%</div>
            </div>
            <a class="card_top" href="#">
              <img src="./images/${product.image}" alt=${product.model} />
              <h3>${product.model}</h3>
            </a>

            <div>
              <a class="card_mid" href="${product.url}">
                <div>
                  <h4 class="card_price">${product.price.toLocaleString()}<span>đ</span></h4>
                  <h4 class="card_old_price">${product.oldPrice.toLocaleString()}<span>đ</span></h4>
                </div>
                <!-- <div class="card_des"></div> -->
              </a>
            </div>
          </div>
        </li>
      `;
    }

    // SwiperJS
    $(function () {
      var mySwiper = new Swiper('.swiper-container', {
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        loop: 'true',
        breakpoints: {
          1024: {
            slidesPerView: 5,
            spaceBetween: 10,
          },
          860: {
            slidesPerView: 4,
            spaceBetween: 10,
          },
          768: {
            slidesPerView: 3,
            spaceBetween: 10,
          },
          640: {
            slidesPerView: 3,
            spaceBetween: 10,
          },
          340: {
            slidesPerView: 2,
            spaceBetween: 10,
          },
          300: {
            slidesPerView: 1,
            spaceBetween: 10,
          },
        },
      });

      // mySwiper.slideTo(1);
    });
  </script>
</html>
